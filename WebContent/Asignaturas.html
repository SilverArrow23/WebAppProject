<!DOCTYPE html>
<html>
<head>

	<meta charset="ISO-8859-1">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
	<title>Lista de Asignaturas</title>
	
	<!-- Bootstrap core CSS -->
	<link href="css/bootstrap.css" rel="stylesheet">
  
  <!-- Custom fonts for this template -->
	<link href="plantilla/css/all.css" rel="stylesheet" type="text/css">
 	<link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <!-- Custom styles for this template -->
  	<link href="plantilla/clean-blog.css" rel="stylesheet">
	<link href="signin.css" rel="stylesheet">
	
	<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script>
	function onInicio(){
		$.get("/NOB_Project/AsignaturaServlet",function(data){			
			
			response = $.parseJSON(data);

			$(function() {
				$('#Asignaturas').append(
					$('<tr style="background-color : #0085A1; color : white;">').append(
				            $('<td>').text('Acronimo'),					            
				            $('<td>').text('Nombre'),
				            $('<td>').text('Curso'),
				            $('<td>').text('Cuatrimestre'),
				            $('<td>').text('Creditos')
				    )		
				);				
			    $.each(response, function(i, item) {
			        $('#Asignaturas').append(			        		
		        		$('<tr id='+item.acronimo+'>').append(
					            $('<td>').append(					            		
					            		$('<button class="btn2 btn-lg btn-asig" style="padding-top: 5px; padding-bottom: 5px; padding-right: 10px;padding-left: 10px;" id='+item.acronimo+' onclick="cambiar()" value='+item.acronimo+' name="boton">'+item.acronimo+'</button>')),				            
					            $('<td>').text(item.nombre),
					            $('<td>').text(item.curso),
					            $('<td>').text(item.cuatrimestre),
					            $('<td>').text(item.creditos)
					    )
			        );
			    });
			});
		});
		
		/*$(':button').click(function(){
			/*console.log($(this).parent().parent().prop('id'));
			$.post("/NOB_Project/AlumnoServlet",function(data){
				$(this).attr('id').html(data);
				console.log($(this).parent().parent().prop('id'));
			});
			$('#acrOculto').val('hola');		
		});*/
		
		/*function cambiar(){
            var botonId = this.id;
            $("#form").submit(function(e){
                 e.preventDefault();//stop submit event
                 var self = $(this);//this form
                 $("#acrOculto").val(botonId);//change input
                 $("#form").off("submit");//need form submit event off.
                 self.submit();//submit form
           });
        }*/
        
		function cambiar(){
        	 $("#form").submit();
        }
	}
	
	$('document').ready(onInicio(function(){
	    //miramos si tiene '#' la url
	    if(document.URL.indexOf("#")==-1){
	        // si no se ha cargado aún añadimos "#"
	        url = document.URL+"#";
	        location = "#";

	        //recargamos para que tenga los datos si o si ?? 
	        location.reload(true);
	    }
	}))

	</script>
</head>



<body class="text-center">

	<!-- Page Header -->
  <header class="masthead" style="background-image: url('imagenes/Profesor.jpg')">
    <div class="overlay"></div>
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="site-heading">
            <h1>Lista de Asignaturas</h1>
            <span class="subheading">Estas son todas las asignaturas del profesor</span>
          </div>
        </div>
      </div>
    </div>
  </header>
  
  <div class="container">
    <div class="row" style="justify-content: center">
      <!--  <div class="col-lg-4 col-md-10 mx-auto">
  		<img class="mb-4" src="imagenes/logoNOL.jpg" alt="" width="100" height="72">
  		<div> -->
		<form id="form" action ="/NOB_Project/listaAlumServlet" method= "get">
			<table class="table table-bordered table-condensed" id="Asignaturas"></table>
		</form>

	</div>
  	  </div>
  
  	<div class="container">
  	<div class="row" style=" justify-content : center">
  		<a href="/NOB_Project/login.html"><input type="button" class="btn2 btn-lg btn-primary btn-as" value="Atras"></a>
	</div>
    </div>
  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
    	  <p class="copyright text-muted">Trabajo en grupo realizado para la asignatura Desarrollo Web. Curso 2019-2020</p>
        </div>
      </div>
    </div>
  </footer>
  
    	<script src="vendor/jquery/jquery.min.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

	<!-- Custom scripts for this template -->
	<script src="js/clean-blog.js"></script>
</body>
</html>